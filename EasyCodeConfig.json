{
  "author" : "scccy",
  "version" : "1.2.9",
  "userSecure" : "",
  "currTypeMapperGroupName" : "Default",
  "currTemplateGroupName" : "scccy-temp",
  "currColumnConfigGroupName" : "Default",
  "currGlobalConfigGroupName" : "Default",
  "typeMapper" : {
    "Default" : {
      "name" : "Default",
      "elementList" : [ {
        "matchType" : "REGEX",
        "columnType" : "varchar(\\(\\d+\\))?",
        "javaType" : "java.lang.String"
      }, {
        "matchType" : "REGEX",
        "columnType" : "char(\\(\\d+\\))?",
        "javaType" : "java.lang.String"
      }, {
        "matchType" : "REGEX",
        "columnType" : "(tiny|medium|long)*text",
        "javaType" : "java.lang.String"
      }, {
        "matchType" : "REGEX",
        "columnType" : "decimal(\\(\\d+,\\d+\\))?",
        "javaType" : "java.lang.Double"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "integer",
        "javaType" : "java.lang.Integer"
      }, {
        "matchType" : "REGEX",
        "columnType" : "(tiny|small|medium)*int(\\(\\d+\\))?",
        "javaType" : "java.lang.Integer"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "int4",
        "javaType" : "java.lang.Integer"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "int8",
        "javaType" : "java.lang.Long"
      }, {
        "matchType" : "REGEX",
        "columnType" : "bigint(\\(\\d+\\))?",
        "javaType" : "java.lang.Long"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "date",
        "javaType" : "java.util.Date"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "datetime",
        "javaType" : "java.util.Date"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "timestamp",
        "javaType" : "java.util.Date"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "time",
        "javaType" : "java.time.LocalTime"
      }, {
        "matchType" : "ORDINARY",
        "columnType" : "boolean",
        "javaType" : "java.lang.Boolean"
      }, {
        "matchType" : "REGEX",
        "columnType" : "double(\\(\\d+,\\d+\\))?",
        "javaType" : "java.lang.Double"
      } ]
    }
  },
  "template" : {
    "scccy-temp" : {
      "name" : "scccy-temp",
      "elementList" : [ {
        "name" : "entity.java.vm",
        "code" : "$!{define.vm}\n\n#save(\"/domain/jpa\", \"Jpa.java\")\n#setPackageSuffix(\"domain.jpa\")\n\n$!{autoImport.vm}\nimport jakarta.persistence.Column;\nimport jakarta.persistence.EmbeddedId;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.*;\nimport org.hibernate.proxy.HibernateProxy;\nimport io.swagger.v3.oas.annotations.media.Schema;\n\nimport java.io.Serial;\nimport java.io.Serializable;\nimport java.util.Date;\nimport java.util.Objects;\n\n/**\n * $!{tableInfo.comment}\n */\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@ToString\n@Entity\n@Table(name = \"$!{tool.hump2Underline($tableInfo.name)}\", schema = \"scaffolding\")\n@Schema(name = \"$!{tableInfo.name}Jpa\", description = \"$!{tableInfo.comment}\")\npublic class $!{tableInfo.name}Jpa implements Serializable {\n\n    @Serial\n    private static final long serialVersionUID = $!tool.serial();\n\n#if($tableInfo.pkColumn.size() > 1)\n    /**\n     * 复合主键\n     */\n    @EmbeddedId\n    @Schema(description = \"复合主键\")\n    private $!{tableInfo.name}IdJpa id;\n#else\n    @Id\n    @Column(name = \"$!{tool.hump2Underline($tableInfo.pkColumn.get(0).name)}\")\n    #if($tableInfo.pkColumn.get(0).comment)\n    @Schema(description = \"$!{tableInfo.pkColumn.get(0).comment}\")\n    #else\n    @Schema(description = \"主键\")\n    #end\n    private $!{tool.getClsNameByFullName($tableInfo.pkColumn.get(0).type)} $!{tableInfo.pkColumn.get(0).name};\n#end\n\n#foreach($column in $tableInfo.otherColumn)\n    #if(${column.comment})\n    /**\n     * ${column.comment}\n     */\n    @Schema(description = \"${column.comment}\")\n    #else\n    @Schema(description = \"${column.name}\")\n    #end\n    @Column(name = \"$!{tool.hump2Underline($column.name)}\")\n    private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n#end\n\n    @Override\n    public final boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null) return false;\n        Class<?> oEffectiveClass = o instanceof HibernateProxy ? ((HibernateProxy) o).getHibernateLazyInitializer().getPersistentClass() : o.getClass();\n        Class<?> thisEffectiveClass = this instanceof HibernateProxy ? ((HibernateProxy) this).getHibernateLazyInitializer().getPersistentClass() : this.getClass();\n        if (thisEffectiveClass != oEffectiveClass) return false;\n        $!{tableInfo.name}Jpa that = ($!{tableInfo.name}Jpa) o;\n#if($tableInfo.pkColumn.size() > 1)\n        return getId() != null && Objects.equals(getId(), that.getId());\n#else\n        return $!{tableInfo.pkColumn.get(0).name} != null && Objects.equals($!{tableInfo.pkColumn.get(0).name}, that.$!{tableInfo.pkColumn.get(0).name});\n#end\n    }\n\n    @Override\n    public final int hashCode() {\n#if($tableInfo.pkColumn.size() > 1)\n        return Objects.hash(id);\n#else\n        return Objects.hash($!{tableInfo.pkColumn.get(0).name});\n#end\n    }\n\n}"
      }, {
        "name" : "entity_id.java.vm",
        "code" : "\n\n$!{define.vm}\n\n#save(\"/domain/jpa\", \"IdJpa.java\")\n#setPackageSuffix(\"domain.jpa\")\n\n$!{autoImport.vm}\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Embeddable;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.ToString;\nimport org.hibernate.Hibernate;\n\nimport java.io.Serial;\nimport java.io.Serializable;\nimport java.util.Objects;\n\n#if($tableInfo.pkColumn.size() > 1)\n/**\n * $!{tableInfo.comment} 复合主键类\n */\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@ToString\n@Embeddable\npublic class $!{tableInfo.name}IdJpa implements Serializable {\n\n    @Serial\n    private static final long serialVersionUID = $!tool.serial();\n\n#foreach($pk in $tableInfo.pkColumn)\n    #if(${pk.comment})\n    /**\n     * ${pk.comment}\n     */\n    #end\n    @Size(max = 128)\n    @NotNull\n    @Column(name = \"$!{tool.hump2Underline($pk.name)}\", nullable = false, length = 128)\n    private $!{tool.getClsNameByFullName($pk.type)} $!{pk.name};\n#end\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || Hibernate.getClass(this) != Hibernate.getClass(o)) return false;\n        $!{tableInfo.name}IdJpa entity = ($!{tableInfo.name}IdJpa) o;\n#foreach($pk in $tableInfo.pkColumn)\n        if (!Objects.equals(this.$!{pk.name}, entity.$!{pk.name})) return false;\n#end\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(\n#foreach($pk in $tableInfo.pkColumn)\n            $!{pk.name}#if($foreach.hasNext),#end\n#end\n        );\n    }\n}\n#end"
      }, {
        "name" : "repository.java.vm",
        "code" : "## 引入宏定义\n$!{define.vm}\n\n## 设置保存位置与文件后缀\n#save(\"/dao/repository\", \"Repository.java\")\n\n## 设置包名后缀\n#setPackageSuffix(\"dao.repository\")\n\n## 自动导入工具\n$!{autoImport.vm}\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n## 判断主键列数量（是否复合主键）\n#set($pkCount = $tableInfo.pkColumn.size())\n\n## 实体类与主键类路径\n#set($entityPackage = \"$!{tableInfo.savePackageName}.domain.jpa.$!{tableInfo.name}Jpa\")\n#if($pkCount > 1)\n    #set($pkPackage = \"$!{tableInfo.savePackageName}.domain.jpa.$!{tableInfo.name}IdJpa\")\n#else\n    #set($pk = $tableInfo.pkColumn.get(0))\n    #set($pkPackage = $pk.type)\n#end\n\n\nimport $entityPackage;\nimport $pkPackage;\n\n/**\n * $!{tableInfo.comment} 持久层\n *\n * @author $!author\n * @since $!time.currTime(\"yyyy-MM-dd HH:mm:ss\")\n */\n@Repository\npublic interface $!{tableInfo.name}Repository extends JpaRepository<$!{tableInfo.name}Jpa, #if($pkCount > 1)$!{tableInfo.name}IdJpa#else$!{tool.getClsNameByFullName($pk.type)}#end> {\n\n}"
      }, {
        "name" : "domain.java.vm",
        "code" : "## 引入宏定义\n$!{define.vm}\n\n## 使用宏定义设置回调（保存位置与文件后缀）\n#save(\"/domain/mp\", \"Mp.java\")\n\n## 使用宏定义设置包后缀\n#setPackageSuffix(\"domain.mp\")\n\n## 自动导入包\n$!{autoImport.vm}\nimport java.io.Serializable;\nimport com.baomidou.mybatisplus.annotation.TableField;\nimport com.baomidou.mybatisplus.annotation.TableId;\nimport com.baomidou.mybatisplus.annotation.TableName;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.experimental.Accessors;\nimport com.baomidou.mybatisplus.extension.activerecord.Model;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport java.io.Serial;\n\n## 类注释\n#tableComment(\"实体类\")\n@Data\n@EqualsAndHashCode(callSuper = false)\n@Accessors(chain = true)\n@TableName(\"$!{tool.hump2Underline($!{tableInfo.name})}\")\n@Schema(name = \"$!{tableInfo.name}Mp\", description = \"$tableInfo.comment\")\npublic class $!{tableInfo.name}Mp extends Model<$!{tableInfo.name}Mp> implements Serializable {\n    @Serial\n    private static final long serialVersionUID = $!tool.serial();\n\n#foreach($column in $tableInfo.fullColumn)\n    #if(${column.comment})\n    /**\n     * ${column.comment}\n     */#end\n     \n    @Schema(description = \"${column.comment}\")\n    #if($tableInfo.pkColumn.contains($column))\n    @TableId(\"$!{tool.hump2Underline($!{column.name})}\")\n    #else\n    @TableField(\"$!{tool.hump2Underline($!{column.name})}\")\n    #end\n    private $!{tool.getClsNameByFullName($column.type)} $!{column.name};\n\n#end\n\n}"
      }, {
        "name" : "service.java.vm",
        "code" : "##导入宏定义\n$!{define.vm}\n\n##设置表后缀（宏定义）\n#setTableSuffix(\"Service\")\n\n##保存文件（宏定义）\n#save(\"/dao/service\", \"MpService.java\")\n\n##包路径（宏定义）\n#setPackageSuffix(\"dao.service\")\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport $!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\n\n##表注释（宏定义）\n#tableComment(\"表服务接口\")\npublic interface $!{tableInfo.name}MpService extends IService<$!{tableInfo.name}Mp> {\n\n    /**\n     * 分页查询，Service 层负责构造分页和查询条件\n     */\n    Page<$!{tableInfo.name}Mp> pageLike(Integer pageNum, Integer pageSize, $!{tableInfo.name}Mp query);\n\n    /**\n         * 分页查询，Service 层负责构造分页和查询条件\n         */\n    Page<$!{tableInfo.name}Mp> pageEq(Integer pageNum, Integer pageSize, $!{tableInfo.name}Mp query);\n\n}"
      }, {
        "name" : "serviceImpl.java.vm",
        "code" : "## 导入宏定义\n$!{define.vm}\n\n## 设置文件后缀\n#setTableSuffix(\"ServiceImpl\")\n\n## 保存路径\n#save(\"/dao/service/impl\", \"MpServiceImpl.java\")\n\n## 包路径\n#setPackageSuffix(\"dao.service.impl\")\n\n## 导入依赖包\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\nimport $!{tableInfo.savePackageName}.dao.mapper.$!{tableInfo.name}Mapper;\nimport $!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp;\nimport $!{tableInfo.savePackageName}.dao.service.$!{tableInfo.name}MpService;\nimport org.springframework.stereotype.Service;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\n\n## 表注释\n#tableComment(\"服务实现类\")\n@Service\npublic class $!{tableInfo.name}MpServiceImpl\n        extends ServiceImpl<$!{tableInfo.name}Mapper, $!{tableInfo.name}Mp>\n        implements $!{tableInfo.name}MpService {\n    @Override\n    public Page<$!{tableInfo.name}Mp> pageEq(Integer pageNum, Integer pageSize, $!{tableInfo.name}Mp $!{tool.firstLowerCase($!{tableInfo.name})}Mp) {\n        Page<$!{tableInfo.name}Mp> page = new Page<>(pageNum, pageSize);\n        QueryWrapper<$!{tableInfo.name}Mp> wrapper = new QueryWrapper<>();\n\n        #foreach($column in $tableInfo.fullColumn)\n            #set($colMethod = $tool.firstUpperCase($column.name))\n            #set($colName = $tool.hump2Underline($column.name))\n            #if($column.type == \"java.lang.String\")\n                if($!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}() != null && !$!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}().isEmpty()) {\n                    wrapper.eq(\"$!{colName}\", $!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}());\n                }\n            #else\n                if($!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}() != null) {\n                    wrapper.eq(\"$!{colName}\", $!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}());\n                }\n            #end\n        #end\n\n        return this.page(page, wrapper);\n    }\n\n\n    @Override\n    public Page<$!{tableInfo.name}Mp> pageLike(Integer pageNum, Integer pageSize, $!{tableInfo.name}Mp $!{tool.firstLowerCase($!{tableInfo.name})}Mp) {\n        Page<$!{tableInfo.name}Mp> page = new Page<>(pageNum, pageSize);\n        QueryWrapper<$!{tableInfo.name}Mp> wrapper = new QueryWrapper<>();\n\n        #foreach($column in $tableInfo.fullColumn)\n            #set($colMethod = $tool.firstUpperCase($column.name))\n            #set($colName = $tool.hump2Underline($column.name))\n            #if($column.type == \"java.lang.String\")\n                if($!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}() != null && !$!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}().isEmpty()) {\n                    wrapper.like(\"$!{colName}\", $!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}());\n                }\n            #else\n                if($!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}() != null) {\n                    wrapper.like(\"$!{colName}\", $!{tool.firstLowerCase($!{tableInfo.name})}Mp.get$!{colMethod}());\n                }\n            #end\n        #end\n\n        return this.page(page, wrapper);\n    }\n\n}"
      }, {
        "name" : "mapper.java.vm",
        "code" : "## 导入宏定义\n$!{define.vm}\n\n## 设置文件后缀\n#setTableSuffix(\"Mapper\")\n\n## 保存路径\n#save(\"/dao/mapper\", \"Mapper.java\")\n\n## 包路径\n#setPackageSuffix(\"dao.mapper\")\n\n## 导入依赖\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport $!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp;\nimport org.apache.ibatis.annotations.Mapper;\n\n## 表注释\n#tableComment(\"Mapper 接口\")\n@Mapper\npublic interface $!{tableInfo.name}Mapper extends BaseMapper<$!{tableInfo.name}Mp> {\n\n}"
      }, {
        "name" : "mapperxml.xml.vm",
        "code" : "## 引入 MyBatis 支持\n$!{mybatisSupport.vm}\n\n## 设置保存文件名与路径（mapperxml）\n$!callback.setFileName($tool.append($!{tableInfo.name}, \"Mapper.xml\"))\n$!callback.setSavePath($tool.append($modulePath, \"/src/main/resources/mapperxml\"))\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n\n<mapper namespace=\"$!{tableInfo.savePackageName}.dao.mapper.$!{tableInfo.name}Mapper\">\n\n    <resultMap id=\"BaseResultMap\" type=\"$!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp\">\n        <!--@mbg.generated-->\n        <!--@Table $!{tableInfo.obj.name}-->\n#foreach($column in $tableInfo.fullColumn)\n    #if($column.isPk)\n        <id column=\"$!{column.obj.name}\" jdbcType=\"$!{column.ext.jdbcType}\" property=\"$!{column.name}\" />\n    #else\n        <result column=\"$!{column.obj.name}\" jdbcType=\"$!{column.ext.jdbcType}\" property=\"$!{column.name}\" />\n    #end\n#end\n    </resultMap>\n\n    <sql id=\"Base_Column_List\">\n        <!--@mbg.generated-->\n        #foreach($column in $tableInfo.fullColumn)\n            $!{column.obj.name}#if($foreach.hasNext), #end\n        #end\n    </sql>\n\n</mapper>"
      }, {
        "name" : "controller.java.vm",
        "code" : "$!{define.vm}\n\n#set($tableSuffix = \"Controller\")\n#save(\"/controller\", \"Controller.java\")\n#setPackageSuffix(\"controller\")\n\n$!{autoImport.vm}\nimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;\nimport $!{tableInfo.savePackageName}.dao.service.$!{tableInfo.name}MpService;\nimport $!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp;\nimport com.scccy.common.modules.dto.ResultData;\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport java.util.List;\n\n#set($pkCount = $tableInfo.pkColumn.size())\n#if($pkCount > 1)\nimport $!{tableInfo.savePackageName}.domain.jpa.$!{tableInfo.name}Jpa;\nimport $!{tableInfo.savePackageName}.domain.jpa.$!{tableInfo.name}IdJpa;\nimport $!{tableInfo.savePackageName}.dao.repository.$!{tableInfo.name}Repository;\n#else\nimport $!{tableInfo.savePackageName}.domain.mp.$!{tableInfo.name}Mp;\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n\n#if($pkCount > 1)\n/**\n * $!{tableInfo.comment} 控制器（联合主键，使用 JPA Repository 进行部分 CRUD；分页/列表使用 MyBatis-Plus）\n *\n * @author $!author\n * @date $!time.currTime()\n */\n@RestController\n@RequestMapping(\"/$!tool.firstLowerCase($!{tableInfo.name})\")\npublic class $!{tableInfo.name}$!tableSuffix {\n\n    ## 定义局部变量避免嵌套 $!{}\n    #set($entityVar = $tool.firstLowerCase($tableInfo.name) + \"Mp\")\n    #set($entityClass = $tableInfo.name + \"Mp\")\n    #set($pkName = $tableInfo.pkColumn.get(0).name)\n@Autowired\nprivate $!{tableInfo.name}Repository $!{tool.firstLowerCase($!{tableInfo.name})}Repository;\n\n@Autowired\nprivate $!{tableInfo.name}MpService $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl;\n\n/**\n * 新增（请求使用 Mp 实体 -> 转换为 JPA 实体后保存）\n */\n@PostMapping\npublic ResultData<?> save(@RequestBody $!{tableInfo.name}Mp mp) {\n    if (mp == null) return ResultData.fail(\"请求体不能为空\");\n    // 构造复合主键对象\n        $!{tableInfo.name}IdJpa id = new $!{tableInfo.name}IdJpa();\n    #foreach($pk in $tableInfo.pkColumn)\n        id.set$!{tool.firstUpperCase($pk.name)}(mp.get$!{tool.firstUpperCase($pk.name)}());\n    #end\n\n    // 构造 JPA 实体并拷贝非主键字段\n        $!{tableInfo.name}Jpa entity = new $!{tableInfo.name}Jpa();\n    entity.setId(id);\n    #foreach($column in $tableInfo.otherColumn)\n        entity.set$!{tool.firstUpperCase($column.name)}(mp.get$!{tool.firstUpperCase($column.name)}());\n    #end\n\n        $!{tableInfo.name}Jpa saved = $!{tool.firstLowerCase($!{tableInfo.name})}Repository.save(entity);\n    return ResultData.ok(saved);\n}\n\n/**\n * 根据复合主键逻辑删除（请求使用 Mp 实体，或只需在 body 中带主键字段）\n */\n@DeleteMapping\npublic ResultData<?> delete(@RequestBody $!{tableInfo.name}Mp mp) {\n    if (mp == null) {\n        return ResultData.fail(\"请求体不能为空\");\n    }\n\n    // 构造 LambdaQueryWrapper\n    LambdaQueryWrapper<$!{tableInfo.name}Mp> wrapper = new LambdaQueryWrapper<>();\n    #foreach($pk in $tableInfo.pkColumn)\n        wrapper.eq($!{tableInfo.name}Mp::get$!{tool.firstUpperCase($pk.name)}, mp.get$!{tool.firstUpperCase($pk.name)}());\n    #end\n\n    boolean success = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.remove(wrapper); // 逻辑删除\n    if (success) {\n        return ResultData.ok(\"删除成功\");\n    } else {\n        return ResultData.fail(\"删除失败或记录不存在\");\n    }\n}\n\n/**\n * 批量删除（JPA）—— 接收 Mp 实体列表（从每个 Mp 中抽取主键并删除）\n */\n@DeleteMapping(\"/batch\")\npublic ResultData<?> deleteBatch(@RequestBody List<$!{tableInfo.name}Mp> mps) {\n    if (mps == null || mps.isEmpty()) return ResultData.fail(\"主键列表为空\");\n    mps.forEach(mp -> {\n            $!{tableInfo.name}IdJpa id = new $!{tableInfo.name}IdJpa();\n        #foreach($pk in $tableInfo.pkColumn)\n            id.set$!{tool.firstUpperCase($pk.name)}(mp.get$!{tool.firstUpperCase($pk.name)}());\n        #end\n            $!{tool.firstLowerCase($!{tableInfo.name})}Repository.deleteById(id);\n    });\n    return ResultData.ok(\"批量删除成功\");\n}\n\n/**\n * 修改（请求使用 Mp 实体 -> 转换为 JPA 实体后保存）\n */\n@PutMapping\npublic ResultData<?> update(@RequestBody $!{tableInfo.name}Mp mp) {\n    if (mp == null) return ResultData.fail(\"请求体不能为空\");\n        $!{tableInfo.name}IdJpa id = new $!{tableInfo.name}IdJpa();\n    #foreach($pk in $tableInfo.pkColumn)\n        id.set$!{tool.firstUpperCase($pk.name)}(mp.get$!{tool.firstUpperCase($pk.name)}());\n    #end\n\n        $!{tableInfo.name}Jpa entity = new $!{tableInfo.name}Jpa();\n    entity.setId(id);\n    #foreach($column in $tableInfo.otherColumn)\n        entity.set$!{tool.firstUpperCase($column.name)}(mp.get$!{tool.firstUpperCase($column.name)}());\n    #end\n\n        $!{tableInfo.name}Jpa saved = $!{tool.firstLowerCase($!{tableInfo.name})}Repository.save(entity);\n    return ResultData.ok(saved);\n}\n\n/**\n * 根据复合主键查询（请求使用 Mp 实体或只在 body 中带主键字段）\n */\n@PostMapping(\"/getById\")\npublic ResultData<$!{tableInfo.name}Jpa> getById(@RequestBody $!{tableInfo.name}Mp mp) {\n    if (mp == null) return ResultData.fail(\"请求体不能为空\");\n        $!{tableInfo.name}IdJpa id = new $!{tableInfo.name}IdJpa();\n    #foreach($pk in $tableInfo.pkColumn)\n        id.set$!{tool.firstUpperCase($pk.name)}(mp.get$!{tool.firstUpperCase($pk.name)}());\n    #end\n    return $!{tool.firstLowerCase($!{tableInfo.name})}Repository.findById(id)\n            .map(ResultData::ok)\n            .orElseGet(() -> ResultData.fail(\"未查询到数据\"));\n}\n\n/**\n * 分页查询（支持所有字段的 like 查询）\n */\n@PostMapping(\"/pageLike\")\npublic ResultData<Page<$!{entityClass}>> pageLike(\n        @RequestParam(defaultValue = \"1\") Integer pageNum,\n        @RequestParam(defaultValue = \"10\") Integer pageSize,\n    $!{entityClass} $!{entityVar}) {\n\n    // 分页逻辑已移至 ServiceImpl，控制器仅负责参数传递\n    Page<$!{entityClass}> resultPage = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.pageLike(pageNum, pageSize, $!{entityVar});\n    return ResultData.ok(resultPage);\n}\n\n/**\n * 列表查询（等值）\n */\n@PostMapping(\"/pageEq\")\npublic ResultData<Page<$!{entityClass}>> pageEq(\n        @RequestParam(defaultValue = \"1\") Integer pageNum,\n        @RequestParam(defaultValue = \"10\") Integer pageSize,\n    $!{entityClass} $!{entityVar}) {\n    // 分页逻辑已移至 ServiceImpl，控制器仅负责参数传递\n    Page<$!{entityClass}> resultPage =$!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.pageEq(pageNum, pageSize, $!{entityVar});\n    return ResultData.ok(resultPage);\n}\n\n/**\n * 获取所有数据（无条件）\n */\n@GetMapping(\"/all\")\npublic ResultData<List<$!{tableInfo.name}Mp>> all() {\n    List<$!{tableInfo.name}Mp> list = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.list();\n    return ResultData.ok(list);\n}\n}\n#else\n/**\n * $!{tableInfo.comment} 控制器（单主键，使用 MyBatis-Plus Service 完整 CRUD）\n *\n * @author $!author\n * @date $!time.currTime()\n */\n@RestController\n@RequestMapping(\"/$!tool.firstLowerCase($!{tableInfo.name})\")\npublic class $!{tableInfo.name}$!tableSuffix {\n\n    ## 定义局部变量避免嵌套 $!{}\n    #set($entityVar = $tool.firstLowerCase($tableInfo.name) + \"Mp\")\n    #set($entityClass = $tableInfo.name + \"Mp\")\n    #set($pkName = $tableInfo.pkColumn.get(0).name)\n\n\n@Autowired\nprivate $!{tableInfo.name}MpService $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl;\n\n/**\n * 新增\n */\n@PostMapping\npublic ResultData<?> save(@RequestBody $!{entityClass} $!{entityVar}) {\n    boolean result = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.save($!{entityVar});\n    return result ? ResultData.ok(\"新增成功\") : ResultData.fail(\"新增失败\");\n}\n\n/**\n * 根据ID删除\n */\n@DeleteMapping(\"/{id}\")\npublic ResultData<?> delete(@PathVariable Long id) {\n    boolean result = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.removeById(id);\n    return result ? ResultData.ok(\"删除成功\") : ResultData.fail(\"删除失败\");\n}\n\n/**\n * 批量删除\n */\n@DeleteMapping(\"/batch\")\npublic ResultData<?> deleteBatch(@RequestBody List<Long> ids) {\n    boolean result = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.removeByIds(ids);\n    return result ? ResultData.ok(\"批量删除成功\") : ResultData.fail(\"批量删除失败\");\n}\n\n/**\n * 修改\n */\n@PutMapping\npublic ResultData<?> update(@RequestBody $!{entityClass} $!{entityVar}) {\n    boolean result = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.updateById($!{entityVar});\n    return result ? ResultData.ok(\"修改成功\") : ResultData.fail(\"修改失败\");\n}\n\n/**\n * 根据ID查询\n */\n@GetMapping(\"/{id}\")\npublic ResultData<$!{entityClass}> getById(@PathVariable Long id) {\n    $!{entityClass} entity = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.getById(id);\n    return ResultData.ok(entity);\n}\n\n/**\n * 分页查询（支持所有字段的 like 查询）\n */\n@PostMapping(\"/pageLike\")\npublic ResultData<Page<$!{entityClass}>> pageLike(\n        @RequestParam(defaultValue = \"1\") Integer pageNum,\n        @RequestParam(defaultValue = \"10\") Integer pageSize,\n    $!{entityClass} $!{entityVar}) {\n\n    // 分页逻辑已移至 ServiceImpl，控制器仅负责参数传递\n    Page<$!{entityClass}> resultPage = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.pageLike(pageNum, pageSize, $!{entityVar});\n    return ResultData.ok(resultPage);\n}\n\n/**\n * 列表查询（等值）\n */\n@PostMapping(\"/pageEq\")\npublic ResultData<Page<$!{entityClass}>> pageEq(\n        @RequestParam(defaultValue = \"1\") Integer pageNum,\n        @RequestParam(defaultValue = \"10\") Integer pageSize,\n    $!{entityClass} $!{entityVar}) {\n    // 分页逻辑已移至 ServiceImpl，控制器仅负责参数传递\n    Page<$!{entityClass}> resultPage = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.pageEq(pageNum, pageSize, $!{entityVar});\n    return ResultData.ok(resultPage);\n}\n\n/**\n * 获取所有数据（无条件）\n */\n@GetMapping(\"/all\")\npublic ResultData<List<$!{entityClass}>> all() {\n    List<$!{entityClass}> list = $!{tool.firstLowerCase($!{tableInfo.name})}MpServiceImpl.list();\n    return ResultData.ok(list);\n}\n}\n#end\n"
      } ]
    }
  },
  "columnConfig" : { },
  "globalConfig" : { }
}